(()=>{"use strict";var t={n:e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return t.d(o,{a:o}),o},d:(e,o)=>{for(var a in o)t.o(o,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:o[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const e=window.React,o=window.wp.components,a=window.wp.apiFetch;var n=t.n(a);const i=window.ReactJSXRuntime,l=({onClose:t,mediaId:a})=>{console.log("PortalContent",a);const[l,s]=(0,e.useState)(!1),[c,r]=(0,e.useState)({x:.5,y:.5}),[d,u]=(0,e.useState)(!1),[p,m]=(0,e.useState)(null),h=(0,e.useCallback)((async()=>{await n()({path:`/wp/v2/media/${a}`}).then((t=>{m(t),r(t.meta.focal_point||{x:.5,y:.5}),s(!1)}))}),[a]),w=(0,e.useCallback)((async()=>{await n()({path:`/wp-target-crop/v1/focal-point/${a}`,method:"POST",data:{focalPoint:c}}).then((e=>{e?t():alert("Error: Focus point not saved"),console.log(e)}))}),[c,a,t]);return(0,e.useEffect)((async()=>{l||(s(!0),await h())}),[a]),!p||l?null:(0,i.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:9999999},onClick:t,children:(0,i.jsxs)("div",{className:"relative bg-white w-full h-auto p-10 max-w-3xl max-h-3xl",onClick:t=>t.stopPropagation(),children:[(0,i.jsx)(o.FocalPointPicker,{url:p.source_url,dimensions:{width:p.media_details.width,height:p.media_details.height},value:c,onChange:t=>{r(t),u(!0)}}),(0,i.jsxs)("div",{className:"flex gap-x-2",children:[(0,i.jsx)("button",{className:"button button-primary button-large",onClick:w,disabled:!d,children:"Save"}),(0,i.jsx)("button",{className:"button button-large",onClick:t,children:"Close"})]})]})})},s=window.ReactDOM;document.addEventListener("click",(function(t){if(t.target.classList.contains("wp_target_crop_focal_point")){const e=t.target.getAttribute("imageId");if(e){t.preventDefault();const o=document.createElement("div");o.id="custom-portal-container",document.body.appendChild(o);const a=(0,s.createRoot)(o);a.render((0,i.jsx)(l,{onClose:()=>{a.unmount(),document.body.removeChild(o)},mediaId:e}))}}}))})();